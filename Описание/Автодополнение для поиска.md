# Автодополнение для поиска

Адрес `https://api.bolshayastrana.com/search/autocomplete`

Для следующих объектов можно воспользоваться автодополнением по названию:

- Направления тура
- Виды отдыха
- Туры

Для этого нужно передать следующие GET параметры

| Параметр      | Назначение                                                                                              | Тип данных | Обязательность | Значение по умолчанию |
|---------------|---------------------------------------------------------------------------------------------------------|------------|----------------|-----------------------|
| phrase        | Часть названия объекта, минимальная длина - 3 символа                                                   | string     | Да             | -                     |
| limit         | Максимум, сколько вернуть результатов поиска, максимум 50                                               | integer    | Нет            | 10                    |
| type          | Тип объекта, по которому происходит поиск                                                               | string     | Да             | -                     |
| format        | Один из двух вариантов: "full" - чтобы вернуть полную информацию, "short" - чтобы вернуть ID и название | string     | Нет            | short                 |
| onlyWithTours | Если значение 1, то вернутся только объекты, для которых есть опубликованные туры                       | bool       | Нет            | 0                     |

Сопоставления объектов и их типов для автодополнения

| Название объекта                 | Тип          |
|----------------------------------|--------------|
| Направления тура (регион, город) | destinations |
| Вид отдыха                       | rest-kinds   |
| Тур                              | tours        |

Возвращается всегда массив объектов, в зависимости от параметра `format` могут быть следующего вида:

## Пример выдачи для `format: full`

```json
[
  {
    "id": 1,
    "name": "Алтай",
    "name_where_to": "на Алтай",
    "name_where": "на Алтае",
    "url": "https://bolshayastrana.com/altaj",
    "photo": "https://i.bolshayastrana.com/{{size}}/00/e7/00e705aa24373dd347a84a2a6919d2da.jpeg",
    "type": "regions"
  },
  {
    "id": 36,
    "name": "Горно-Алтайск",
    "url": "https://bolshayastrana.com/gorno-altajsk",
    "photo": null,
    "type": "cities"
  }
]
```

Возвращаемые объекты для формата `full` различаются для каждого объекта.

## Формат `short`

```json
[
  {
    "id": 2,
    "name": "Архангельская область"
  },
  {
    "id": 31,
    "name": "Архыз"
  }
]
```

Это универсальный формат `short` - он одинаковый для всех.

## Возможные ошибки

```json
{
  "name": "Data Validation Failed",
  "code": 2,
  "detail": "Проверьте соответствие типов данных переданных параметров",
  "errors": [
    {
      "field_name": "phrase",
      "message": "Значение должно содержать минимум 3 символа."
    },
    {
      "field_name": "limit",
      "message": "Значение не должно превышать 50."
    },
    {
      "field_name": "format",
      "message": "Может быть только 'short' или 'full'."
    },
    {
      "field_name": "type",
      "message": "Неизвестный индекс."
    }
  ]
}
```