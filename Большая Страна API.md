# Большая Страна API

**API URL:** [https://api.bolshayastrana.com/](https://api.bolshayastrana.com/)

**Актуальная версия API: 1.5**

API использует систему версий, для указания номера версии необходимо использовать параметр "**v**". Пример адреса с
указанием версии https://api.bolshayastrana.com/list/destinations?v=1.4

### Постраничная выборка данных

Большинство методов поддерживают постраничную выборку данных. Для этого необходимо передать GET параметры:

**page**- номер текущий страницы (начиная с 1)

**limit -** максимальное количество элементов на одной странице (максимальное значение 50, по умолчанию 20)

В случае, если номер страницы некорректный, никакая ошибка не вернется.

- Если номер страницы МЕНЬШЕ 0, вернется нулевая страница
- Если номер страницы БОЛЬШЕ количества страниц, вернется последняя страница

При этом, блок `pagination` в ответе всегда будет корректным, то есть отображать текущее состояние.

В ответах будет приходить объект `pagination`, который содержит информацию о постраничной выборке:

```json
  "pagination": {
    "current_page": 1,
    "total_pages": 2,
    "total_items": 30,
    "per_page": 20
  }
```

| Название     | Назначение                        | Тип данных |
|--------------|-----------------------------------|------------|
| current_page | Номер текущей страницы            | integer    |
| total_pages  | Общее количество страниц          | integer    |
| total_items  | Общее количество элементов        | integer    |
| per_page     | Количество элементов на страницах | integer    |

## Авторизация

Для работы с API необходимо передавать в HTTP запросе заголовок Authorization: Bearer <API Токен>. Для получения токена,
обратитесь по почте [partners@bolshayastrana.com](mailto:partners@bolshayastrana.com).

Пример заголовка:

```html
Authorization: Bearer 4Tc3dcX2r3u1lvvVtctHJBBmOf1JkJQ3oIptBbSXqCpgwJX09zmhGrSksvSV5BgT
```

## Методы

[Формирование партнерских ссылок](Описание/Формирование%20партнерских%20ссылок.md)

[Заявка на бронирование](Описание/Заявка%20на%20бронирование.md)

[Заявка на расчет стоимости с билетами](Описание/Заявка%20на%20расчет%20стоимости%20с%20билетами.md)

[Виды отдыха](Описание/Виды%20отдыха.md)

[Направления тура](Описание/Направления%20тура.md)

[Подборки по тематикам](Описание/Подборки%20по%20тематикам.md)

[Календарные пресеты](Описание/Календарные%20пресеты.md)

[Поиск туров](Описание/Поиск%20туров.md)

[Получение полной информации о туре](Описание/Получение%20полной%20информации%20о%20туре.md)

[Получить отзывы для тура](Описание/Получить%20отзывы%20для%20тура.md)

[Автодополнение для поиска](Описание/Автодополнение%20для%20поиска.md)

[Список типов проживаний](Описание/Список%20типов%20проживаний.md)

## Формат ошибок

[Расшифровка кодов ошибок](Описание/Расшифровка%20кодов%20ошибок.md)

**Аутентификация и авторизация**

Все запросы к API должны быть авторизованными Вашим токеном, поэтому при отправке запроса с неверным токеном или без
него вернется следующая ошибка:

```json
Status: 401 Unauthorized
{
"name": "Unauthorized",
"code": 1,
"detail": "Проверьте, что вы передаете токен доступа в заголовках запроса, а также, что токен верный.",
"errors": []
}
```

**Валидация**

При отправке запросов к API происходит валидация входных данных на корректность. Например, нельзя в параметр с типом
данных integer передать строку, которая содержит не целое число

Формат ошибки:

Возвращается объект, ключами которого являются параметры, которые являются неверными, а значения - массивы строк, в
которых перечислены ошибки валидации

```json
Status: 422 Data Validation Failed
{
"name": "Data Validation Failed",
"code": 2,
"detail": "Проверьте соответствие типов данных переданных параметров",
"errors": [
{
"field_name": "id",
"message": "Значение должно быть целым числом."
}
]
}
```

**По заданному запросу ничего не найдено**

Если при заданных параметрах ничего не найдено, может вернуться ошибка 404 в следующем формате

```json
Status 404 Not Found
{
  "name": "Not found",
  "code": 3,
  "detail": "По переданным параметрам ничего не найдено.",
  "errors": []
}
```

## Фотографии

Фотографии в пейлоадах приходят с плейсхолдерами для размеров. Необходимо заменить {{size}} на необходимый размер. Ниже
приведен список доступных размеров

- Варианты размеров

  '140x90',
  '140x140',
  '150x95',
  '150x200',
  '165x200',
  '180x260',
  '200x200',
  '220x150',
  '220x220',
  '230x288',
  '280x180',
  '270x200',
  '270x270',
  '272x384',
  '280x280',
  '300x190',
  '300x200',
  '300x300',
  '300x400',
  '305x200',
  '330x400',
  '352x352',
  '360x250',
  '360x520',
  '374x86',
  '375x375',
  '400x400',
  '400x480',
  '440x300',
  '440x440',
  '460x576',
  '500x00',
  '540x400',
  '540x540',
  '544x768',
  '576x467',
  '600x400',
  '600x600',
  '600x800',
  '610x400',
  '644x460',
  '704x704',
  '710x375',
  '720x368',
  '720x500',
  '748x172',
  '750x750',
  '765x340',
  '768x226',
  '768x467',
  '800x960',
  '940x00',
  '1000x1000',
  '1060x460',
  '1136x467',
  '1152x934',
  '1536x934',
  '1200x00',
  '1200x410',
  '1200x628',
  '1288x920',
  '1420x736',
  '1536x452',
  '1920x420',
  '2120x920',
  '2272x934'

Например API возвращает URL вида

https://i.bolshayastrana.com/{{size}}/ed/a4/eda4ff281106f113161508c725299d10.jpeg

меняем {{size}} на нужный, например на 140x140, получаем URL вида

[https://i.bolshayastrana.com/140x140/ed/a4/eda4ff281106f113161508c725299d10.jpeg](https://i.bolshayastrana.com/140x140/ed/a4/eda4ff281106f113161508c725299d10.jpeg)

## Поддержка

По любым вопросам, связанным с работой API, напишите по
почте [partners@bolshayastrana.com](mailto:partners@bolshayastrana.com).

## История изменений API

[История изменений](Описание/%20изменений.md)